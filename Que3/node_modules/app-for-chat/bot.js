const readline = require('readline');
var rl = readline.createInterface({input: process.stdin, output: process.stdout, terminal: false});

function startConversation()
{
    rl.setPrompt('You ==> ');
    rl.prompt();
}

function giveAnswer(str)
{
    if(str.includes('hi') || str.includes('hello'))
    {
        return 'Hello, what is your question ?';
    }
    else
    {
        for(var i=0;i<operation.length;i++)
        {
            if(operation[i].que == str.toLowerCase().trim())
            {
                return operation[i].ans;
            }
        }
    }
    return 'Sorry, I did not get your question...';
}

const operation = [
    {
        que: 'hi',
        ans: 'Hello, what is your question ?'
    },
    {
        que: '',
        ans: 'Hello, what is your question ?'
    },
    {
        que: 'who are you ?',
        ans: 'I am Chatbot...'
    },
    {
        que: 'how old are you ?',
        ans: 'I am a computer program...I dont have age...'
    },
    {
        que: 'how are you ?',
        ans: 'I am fine...'
    },
    {
        que: 'what do you teach ?',
        ans: 'I teach Nodejs...'
    },
    {
        que: 'what is your name ?',
        ans: 'My name is Chatbot...'
    }
];

function main()
{
    var rl = readline.createInterface({input: process.stdin, output: process.stdout, terminal: false});
    console.log("Type hi to start the conversation...and Type exit to end the conversation...");
    startConversation();

    rl.on('line', (msg) => {
        if(msg.toLocaleLowerCase() == 'exit')
        {
            rl.close();
            console.log("Thanks for the conversation...");
        }
        else
        {
            console.log('Chatbot ==> ' + giveAnswer(msg));
            console.log();
            startConversation();
        }
    });
}
main();
module.exports = main;